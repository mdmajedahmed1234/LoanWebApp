<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>LisnWebApp - ঋণ ও খরচ হিসাব</title>
<style>
body { font-family: Arial; max-width: 900px; margin: auto; padding: 20px; }
input, button { margin:5px; padding:5px; }
table { width:100%; border-collapse: collapse; margin-top:20px; }
th, td { border:1px solid #ccc; padding:8px; text-align:center; }
th { background-color:#f0f0f0; }
</style>
<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore.js"></script>
</head>
<body>
<h1>LisnWebApp - ঋণ ও খরচ হিসাব</h1>

<div>
  নাম/Item: <input id="entryName" placeholder="যেমন: ঋণদাতা বা খরচের নাম">
  মোট: <input id="entryAmount" type="number" placeholder="টাকা">
  মাসিক কিস্তি/খরচ: <input id="entryInstallment" type="number" placeholder="টাকা">
  সঞ্চয়/Extra: <input id="entrySaving" type="number" placeholder="টাকা">
  <button onclick="addEntry()">Add Entry</button>
</div>

<h2>তালিকা</h2>
<table id="entryTable">
<tr>
<th>নাম</th>
<th>মোট</th>
<th>মাসিক কিস্তি/খরচ</th>
<th>সঞ্চয়</th>
<th>বাকি মাস</th>
<th>মোট পরিশোধিত</th>
</tr>
</table>

<h2>Summary</h2>
<p>মোট: <span id="totalAmount">0</span> টাকা</p>
<p>মোট পরিশোধিত: <span id="totalPaid">0</span> টাকা</p>
<p>মোট সঞ্চয়: <span id="totalSaving">0</span> টাকা</p>
<p>মোট বাকি: <span id="totalRemaining">0</span> টাকা</p>

<script>
// Firebase Configuration - Replace with your Project's details
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "lisnwebapp.firebaseapp.com",
  projectId: "lisnwebapp",
  storageBucket: "lisnwebapp.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};

const app = firebase.initializeApp(firebaseConfig);
const db = firebase.firestore();

// Add Entry
function addEntry() {
  const name = document.getElementById('entryName').value;
  const amount = parseFloat(document.getElementById('entryAmount').value);
  const installment = parseFloat(document.getElementById('entryInstallment').value);
  const saving = parseFloat(document.getElementById('entrySaving').value);

  if(!name || isNaN(amount) || isNaN(installment) || isNaN(saving)) {
    alert("সব তথ্য পূরণ করুন");
    return;
  }

  db.collection("entries").add({ name, amount, installment, saving })
    .then(()=>{ updateTable(); });
}

// Update Table
function updateTable() {
  const table = document.getElementById('entryTable');
  table.innerHTML = `<tr>
<th>নাম</th><th>মোট</th><th>মাসিক কিস্তি/খরচ</th><th>সঞ্চয়</th><th>বাকি মাস</th><th>মোট পরিশোধিত</th>
</tr>`;

  let totalAmount = 0, totalPaid = 0, totalSaving = 0;

  db.collection("entries").get().then(snapshot=>{
    snapshot.forEach(doc=>{
      const e = doc.data();
      const paid = e.installment;
      const remainingMonths = Math.ceil((e.amount - paid)/e.installment);
      table.innerHTML += `<tr>
<td>${e.name}</td>
<td>${e.amount}</td>
<td>${e.installment}</td>
<td>${e.saving}</td>
<td>${remainingMonths}</td>
<td>${paid}</td>
</tr>`;
      totalAmount += e.amount;
      totalPaid += paid;
      totalSaving += e.saving;
    });

    document.getElementById('totalAmount').innerText = totalAmount;
    document.getElementById('totalPaid').innerText = totalPaid;
    document.getElementById('totalSaving').innerText = totalSaving;
    document.getElementById('totalRemaining').innerText = totalAmount - totalPaid;
  });
}

updateTable();
</script>
</body>
</html>
